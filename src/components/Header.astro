---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';

const locale = Astro.currentLocale || 'ru';
const base = locale === 'ru' ? '' : `/${locale}`;
const pathname = Astro.url.pathname.replace(/\/$/, '');

const t = {
	ru: {
		home: 'Главная',
		blog: 'Блог',
		projects: 'Проекты',
		about: 'Обо мне',
	},
	udm: {
		home: 'Азьбам',
		blog: 'Блог',
		projects: 'Проектъёс',
		about: 'Мон сярысь',
	},
};

const labels = t[locale as keyof typeof t] || t.ru;
---

<header>
	<nav>
		<h2><a href={base || '/'}>{SITE_TITLE}</a></h2>
		<div class="internal-links">
			<HeaderLink href={base || '/'} isActive={pathname === base || pathname === '/'}>{labels.home}</HeaderLink>
			<HeaderLink href={`${base}/blog`} isActive={pathname.startsWith(`${base}/blog`)}>{labels.blog}</HeaderLink>
			<HeaderLink href={`${base}/projects`} isActive={pathname.startsWith(`${base}/projects`)}>{labels.projects}</HeaderLink>
			<HeaderLink href={`${base}/about`} isActive={pathname.startsWith(`${base}/about`)}>{labels.about}</HeaderLink>
		</div>
		<div class="social-links">
			<a href="https://t.me/vorgoron" target="_blank">
				<span class="sr-only">Follow me on Telegram</span>
				<svg viewBox="0 0 24 24" aria-hidden="true" width="32" height="32">
					<path fill="currentColor" d="M11.944 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0a12 12 0 0 0-.056 0zm4.962 7.224c.1-.002.321.023.465.14a.506.506 0 0 1 .171.325c.016.093.036.306.02.472-.18 1.898-.962 6.502-1.36 8.627-.168.9-.499 1.201-.82 1.23-.696.065-1.225-.46-1.9-.902-1.056-.693-1.653-1.124-2.678-1.8-1.185-.78-.417-1.21.258-1.91.177-.184 3.247-2.977 3.307-3.23.007-.032.014-.15-.056-.212s-.174-.041-.249-.024c-.106.024-1.793 1.14-5.061 3.345-.48.33-.913.49-1.302.48-.428-.008-1.252-.241-1.865-.44-.752-.245-1.349-.374-1.297-.789.027-.216.325-.437.893-.663 3.498-1.524 5.83-2.529 6.998-3.014 3.332-1.386 4.025-1.627 4.476-1.635z"/>
				</svg>
			</a>
			<a href="https://instagram.com/vorgoron" target="_blank">
				<span class="sr-only">Follow me on Instagram</span>
				<svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32">
					<path fill="currentColor" d="M8 0C5.829 0 5.556.01 4.703.048 3.85.088 3.269.222 2.76.42a3.917 3.917 0 0 0-1.417.923A3.927 3.927 0 0 0 .42 2.76C.222 3.268.087 3.85.048 4.7.01 5.555 0 5.827 0 8.001c0 2.172.01 2.444.048 3.297.04.852.174 1.433.372 1.942.205.526.478.972.923 1.417.444.445.89.719 1.416.923.51.198 1.09.333 1.942.372C5.555 15.99 5.827 16 8 16s2.444-.01 3.298-.048c.851-.04 1.434-.174 1.943-.372a3.916 3.916 0 0 0 1.416-.923c.445-.445.718-.891.923-1.417.197-.509.332-1.09.372-1.942C15.99 10.445 16 10.173 16 8s-.01-2.445-.048-3.299c-.04-.851-.175-1.433-.372-1.941a3.926 3.926 0 0 0-.923-1.417A3.911 3.911 0 0 0 13.24.42c-.51-.198-1.092-.333-1.943-.372C10.443.01 10.172 0 7.998 0h.003zm-.717 1.442h.718c2.136 0 2.389.007 3.232.046.78.035 1.204.166 1.486.275.373.145.64.319.92.599.28.28.453.546.598.92.11.281.24.705.275 1.485.039.843.047 1.096.047 3.231s-.008 2.389-.047 3.232c-.035.78-.166 1.203-.275 1.485a2.47 2.47 0 0 1-.599.919c-.28.28-.546.453-.92.598-.281.11-.705.24-1.485.276-.843.038-1.096.047-3.232.047s-2.39-.009-3.233-.047c-.78-.036-1.203-.166-1.485-.276a2.478 2.478 0 0 1-.92-.598 2.48 2.48 0 0 1-.6-.92c-.109-.281-.24-.705-.275-1.485-.038-.843-.046-1.096-.046-3.233 0-2.136.008-2.388.046-3.231.036-.78.166-1.204.276-1.486.145-.373.319-.64.599-.92.28-.28.546-.453.92-.598.282-.11.705-.24 1.485-.276.738-.034 1.024-.044 2.515-.045v.002zm4.988 1.328a.96.96 0 1 0 0 1.92.96.96 0 0 0 0-1.92zm-4.27 1.122a4.109 4.109 0 1 0 0 8.217 4.109 4.109 0 0 0 0-8.217zm0 1.441a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334z"/>
				</svg>
			</a>
			<a href="https://vk.com/vorgoron" target="_blank">
				<span class="sr-only">Follow me on VK</span>
				<svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32">
					<path fill="currentColor" d="M8.5 2C4.91 2 2 4.91 2 8.5C2 12.09 4.91 15 8.5 15C12.09 15 15 12.09 15 8.5C15 4.91 12.09 2 8.5 2ZM11.97 9.18C12.33 9.53 12.68 9.87 13.04 10.22C13.19 10.37 13.34 10.52 13.49 10.68C13.58 10.77 13.66 10.86 13.58 10.98C13.5 11.1 13.38 11.11 13.26 11.11C12.85 11.11 12.45 11.11 12.04 11.11C11.63 11.11 11.33 10.93 11.11 10.61C10.9 10.3 10.7 9.98 10.49 9.67C10.43 9.58 10.36 9.49 10.26 9.45C10.14 9.4 10.03 9.43 9.95 9.53C9.86 9.64 9.83 9.77 9.82 9.91C9.81 10.34 9.81 10.77 9.81 11.2C9.81 11.46 9.68 11.61 9.42 11.64C8.6 11.73 7.83 11.6 7.1 11.23C6.38 10.86 5.79 10.34 5.29 9.72C4.29 8.48 3.53 7.1 2.93 5.64C2.81 5.35 2.81 5.35 3.12 5.35C3.53 5.35 3.94 5.35 4.35 5.35C4.72 5.35 4.9 5.52 5.05 5.85C5.54 6.93 6.18 7.91 7.06 8.72C7.23 8.88 7.36 8.86 7.48 8.68C7.6 8.5 7.63 8.3 7.64 8.1C7.66 7.41 7.66 6.72 7.66 6.03C7.66 5.73 7.58 5.52 7.29 5.42C7.19 5.39 7.08 5.35 7.02 5.24C6.94 5.1 7.04 4.98 7.14 4.92C7.61 4.64 8.3 4.58 8.88 4.72C9.07 4.77 9.12 4.93 9.13 5.12C9.15 5.93 9.15 6.74 9.15 7.55C9.15 7.68 9.17 7.93 9.26 7.98C9.33 8.02 9.44 7.96 9.51 7.9C10.26 7.13 10.83 6.25 11.26 5.27C11.35 5.06 11.47 4.92 11.71 4.92C12.13 4.92 12.55 4.92 12.97 4.92C13.34 4.92 13.44 5.08 13.3 5.42C13.06 6.01 12.71 6.55 12.29 7.05C12.03 7.36 11.76 7.66 11.49 7.96C11.13 8.36 11.15 8.4 11.56 8.79C11.69 8.92 11.83 9.05 11.97 9.18Z"/>
				</svg>
			</a>
			<a href="https://github.com/vorgoron" target="_blank">
				<span class="sr-only">Go to My GitHub repo</span>
				<svg viewBox="0 0 16 16" aria-hidden="true" width="32" height="32"
					><path
						fill="currentColor"
						d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
					></path></svg
				>
			</a>
		</div>
		<div class="lang-switch">
			<a href={pathname.replace(/^\/udm/, '') || '/'} class={locale === 'ru' ? 'active' : ''} title="Русский">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 900 600" width="24" height="16">
					<rect width="900" height="600" fill="#fff"/>
					<rect y="200" width="900" height="400" fill="#0039a6"/>
					<rect y="400" width="900" height="200" fill="#d52b1e"/>
				</svg>
			</a>
			<a href={`/udm${pathname.replace(/^\/udm/, '')}`} class={locale === 'udm' ? 'active' : ''} title="Удмурт">
				<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 540 270" width="24" height="16">
					<rect width="180" height="270" fill="#000"/>
					<rect width="180" height="270" x="180" fill="#fff"/>
					<rect width="180" height="270" x="360" fill="#d21"/>
					<polygon fill="#d21" points="245,60 345,160 195,160 295,60 295,210 195,110 345,110 245,210"/>
				</svg>
			</a>
		</div>
	</nav>
</header>
<style>
	header {
		margin: 0;
		padding: 0 1em;
		background: white;
		box-shadow: 0 2px 8px rgba(var(--black), 5%);
	}
	h2 {
		margin: 0;
		font-size: 1em;
	}

	h2 a,
	h2 a.active {
		text-decoration: none;
	}
	nav {
		display: flex;
		align-items: center;
		justify-content: space-between;
	}
	nav a {
		padding: 1em 0.5em;
		color: var(--black);
		border-bottom: 4px solid transparent;
		text-decoration: none;
	}
	nav a.active {
		text-decoration: none;
		border-bottom-color: var(--accent);
	}
	.lang-switch {
		display: flex;
		gap: 0.5em;
		margin-left: 1em;
	}
	.lang-switch a {
		padding: 1em 0.5em;
		color: var(--black);
		border-bottom: 4px solid transparent;
		text-decoration: none;
		display: flex;
		align-items: center;
		opacity: 0.5;
		transition: opacity 0.2s;
	}
	.lang-switch a:hover,
	.lang-switch a.active {
		opacity: 1;
	}
	.lang-switch svg {
		display: block;
		border: 1px solid #eee;
	}
	.social-links,
	.social-links a {
		display: flex;
	}
	@media (max-width: 720px) {
		.social-links {
			display: none;
		}
	}
</style>
